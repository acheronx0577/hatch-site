{
  "name": "hatch-crm",
  "private": true,
  "packageManager": "pnpm@8.15.4",
  "engines": {
    "node": "22.x"
  },
  "scripts": {
    "postinstall": "pnpm --filter @hatch/db run generate && node apps/api/scripts/sync-prisma-client.js",
    "build": "turbo run build",
    "dev": "turbo run dev --parallel",
    "lint": "turbo run lint",
    "test": "turbo run test",
    "db:migrate": "pnpm --filter @hatch/db migrate",
    "db:seed": "pnpm --filter @hatch/db seed",
    "ci": "turbo run lint test build",
    "web:lint": "pnpm --filter @hatch/web lint",
    "web:test": "pnpm --filter @hatch/web test -- --run",
    "web:test:heap": "NODE_OPTIONS=--max-old-space-size=4096 pnpm --filter @hatch/web test -- --run",
    "web:test:shard:1": "NODE_OPTIONS=--max-old-space-size=3072 VITEST_MAX_THREADS=2 pnpm --filter @hatch/web test -- --run --shard=1/2",
    "web:test:shard:2": "NODE_OPTIONS=--max-old-space-size=3072 VITEST_MAX_THREADS=2 pnpm --filter @hatch/web test -- --run --shard=2/2",
    "prepush:web": "pnpm web:lint && pnpm web:test",
    "tools:detect": "bash scripts/detect_stack.sh",
    "tools:codebase": "pnpm exec ts-node tools/generate_codebase_summary.ts",
    "tools:api": "pnpm exec ts-node tools/generate_api_inventory.ts",
    "tools:openapi": "pnpm exec ts-node tools/generate_openapi.ts",
    "spec:gen:lite": "pnpm --filter @hatch/api exec node ../../scripts/run_generate_openapi_lite.js",
    "spec:smoke": "TS_NODE_TRANSPILE_ONLY=1 TS_NODE_PROJECT=apps/api/tsconfig.docs.json pnpm exec ts-node apps/api/scripts/spec-smoke.ts",
    "spec:verify": "node -e \"require('fs').accessSync('apps/openapi/openapi.lite.json'); require('fs').accessSync('openapi/openapi.lite.json'); console.log('[spec] verify OK');\"",
    "spec:all": "pnpm run spec:gen:lite && pnpm run spec:smoke && pnpm run spec:verify && pnpm run sdk:smoke",
    "sdk:smoke": "TS_NODE_TRANSPILE_ONLY=1 TS_NODE_PROJECT=apps/api/tsconfig.docs.json pnpm exec ts-node apps/api/scripts/sdk-smoke.ts",
    "inventory:all": "pnpm run tools:detect && pnpm run tools:codebase && pnpm run tools:api && pnpm run tools:openapi",
    "matrix:db:validate": "pnpm --filter @hatch/db exec prisma validate",
    "matrix:db:deploy": "pnpm --filter @hatch/db exec prisma migrate deploy",
    "matrix:db:generate": "pnpm --filter @hatch/db exec prisma generate",
    "matrix:seed": "pnpm --filter @hatch/api exec node ../../scripts/run_seed_v1_baseline.js",
    "matrix:seed:rules": "pnpm --filter @hatch/api exec node ../../scripts/run_seed_rules_fixtures.js",
    "matrix:api": "pnpm --filter @hatch/api test",
    "matrix:web:shard1": "NODE_OPTIONS=--max-old-space-size=3072 VITEST_MAX_THREADS=2 pnpm web:test:shard:1",
    "matrix:web:shard2": "NODE_OPTIONS=--max-old-space-size=3072 VITEST_MAX_THREADS=2 pnpm web:test:shard:2",
    "matrix:sdk:smoke": "pnpm run sdk:smoke",
    "full-matrix": "pnpm matrix:db:validate && pnpm matrix:db:deploy && pnpm matrix:db:generate && pnpm matrix:seed && pnpm matrix:seed:rules && pnpm matrix:api && pnpm matrix:web:shard1 && pnpm matrix:web:shard2 && pnpm matrix:sdk:smoke"
  },
  "devDependencies": {
    "@octokit/rest": "^20.1.1",
    "@prisma/client": "5.22.0",
    "next": "^14.2.10",
    "prisma": "5.22.0",
    "ts-node": "^10.9.2",
    "tsconfig-paths": "^4.2.0",
    "turbo": "^1.13.4",
    "typescript": "^5.5.4",
    "yaml": "^2.5.0"
  }
}
